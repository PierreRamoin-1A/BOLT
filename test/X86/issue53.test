# This reproduces issue 53 from our github repo

# RUN: yaml2obj %p/Inputs/issue53.yaml &> %t.exe
# RUN: llvm-bolt %t.exe -relocs -print-cfg -o %t.out \
# RUN:    | FileCheck %s

RUN: eu-nm -n %t.out | FileCheck %s -check-prefix=NM
CHECK: Binary Function "main"

NM: main           |{{.*}}|GLOBAL|FUNC   |{{.*}}| |.text
NM: FUNC           |00000000008003e0|GLOBAL|FUNC   |0000000000000192| |custom
NM: __start_custom |00000000008003e0|GLOBAL|NOTYPE |0000000000000000| |custom
NM: FUNC2          |0000000000800572|GLOBAL|FUNC   |0000000000000192| |custom2
NM: __stop_custom  |0000000000800572|GLOBAL|NOTYPE |0000000000000000| |custom
NM: __start_custom2|0000000000800572|GLOBAL|NOTYPE |0000000000000000| |custom2
NM: __stop_custom2 |0000000000800704|GLOBAL|NOTYPE |0000000000000000| |custom2